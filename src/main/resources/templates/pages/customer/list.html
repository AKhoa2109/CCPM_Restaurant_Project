<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restaurant POS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
<div class="flex h-screen">
    <!-- Left Sidebar -->
    <div th:replace="~{fragments/sidebar}" class="h-screen"></div>


    <!-- Main Content -->
    <div class="flex-1 flex">
        <!-- Menu Section -->
        <div class="w-2/3 p-6 overflow-y-auto">
            <!-- Top Navigation -->
            <div class="flex space-x-4 mb-6" id="categoryButtons">
                <button class="px-4 py-2 bg-blue-500 text-white rounded-lg" data-category="all">
                    All Menu
                </button>
                <button class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg" data-category="appetizers">
                    Appetizers
                </button>
                <button class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg" data-category="main">
                    Main
                </button>
                <button class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg" data-category="dessert">
                    Desserts
                </button>
                <button class="px-4 py-2 bg-gray-100 text-gray-600 rounded-lg" data-category="drinks">
                    Drinks
                </button>
            </div>

            <!-- Search Bar -->
            <div class="mb-6">
                <div class="relative">
                    <input
                            type="text"
                            id="searchInput"
                            placeholder="Search "
                            class="w-full px-4 py-2 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" />
                    <svg
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-5 w-5 text-gray-400 absolute right-3 top-3"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke="currentColor">
                        <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>

            <!-- Menu Grid -->
            <div class="grid grid-cols-3 gap-6" id="menuGrid"></div>
            <!--  nội dung-->
            <table class="min-w-full bg-white border border-gray-300 shadow-lg">
                <thead>
                <tr class="bg-blue-500 text-white uppercase text-sm">
                    <th class="py-3 px-4 border-b">ID</th>
                    <th class="py-3 px-4 border-b">Name</th>
                    <th class="py-3 px-4 border-b">Department</th>
                    <th class="py-3 px-4 border-b">Email</th>
                    <th class="py-3 px-4 border-b">Phone</th>
                    <th class="py-3 px-4 border-b">Address</th>
                    <th class="py-3 px-4 border-b">Actions</th>
                </tr>
                </thead>
                <tbody class="text-gray-700">
                <tr th:each="customer : ${customers}" class="hover:bg-blue-100 transition duration-200">
                    <td class="py-3 px-4 border-b" th:text="${customer.customerId}">ID</td>
                    <td class="py-3 px-4 border-b" th:text="${customer.firstName}">Name</td>
                    <td class="py-3 px-4 border-b" th:text="${customer.lastName}">Department</td>
                    <td class="py-3 px-4 border-b" th:text="${customer.email}">Email</td>
                    <td class="py-3 px-4 border-b" th:text="${customer.phone}">Phone</td>
                    <td class="py-3 px-4 border-b" th:text="${customer.address}">Address</td>
                    <td class="py-3 px-4 border-b">
                        <button
                                onclick="editCustomer(${customer.customerId})"
                                class="border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white py-1 px-2 rounded transition duration-200">
                            Edit
                        </button>
                        <button
                                onclick="deleteCustomer(${customer.customerId})"
                                class="border border-red-600 text-red-600 hover:bg-red-600 hover:text-white py-1 px-2 rounded transition duration-200 ml-2">
                            Delete
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>


        </div>
<!--        module-->
        <div id="customerFormModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-lg font-bold mb-4" id="formTitle">Add Customer</h2>
                <form id="customerForm" onsubmit="submitCustomer(event)">
                    <input type="hidden" id="customerId" />
                    <div class="mb-4">
                        <label class="block">Name</label>
                        <input type="text" id="customerName" required class="border border-gray-300 p-2 rounded w-full" />
                    </div>
                    <div class="mb-4">
                        <label class="block">Department</label>
                        <input type="text" id="customerDepartment" required class="border border-gray-300 p-2 rounded w-full" />
                    </div>
                    <div class="mb-4">
                        <label class="block">Email</label>
                        <input type="email" id="customerEmail" required class="border border-gray-300 p-2 rounded w-full" />
                    </div>
                    <div class="mb-4">
                        <label class="block">Phone</label>
                        <input type="text" id="customerPhone" required class="border border-gray-300 p-2 rounded w-full" />
                    </div>
                    <div class="mb-4">
                        <label class="block">Address</label>
                        <input type="text" id="customerAddress" required class="border border-gray-300 p-2 rounded w-full" />
                    </div>
                    <div class="flex justify-end">
                        <button type="button" onclick="closeForm()" class="border border-gray-400 text-gray-600 hover:bg-gray-200 py-1 px-2 rounded mr-2">Cancel</button>
                        <button type="submit" class="border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white py-1 px-2 rounded">Save</button>
                    </div>
                </form>
            </div>
        </div>

    </div>
</div>
<script>
    let customers = []; // Dữ liệu giả cho khách hàng

    function openForm(customer = null) {
        const modal = document.getElementById('customerFormModal');
        document.getElementById('customerId').value = customer ? customer.customerId : '';
        document.getElementById('customerName').value = customer ? customer.firstName : '';
        document.getElementById('customerDepartment').value = customer ? customer.lastName : '';
        document.getElementById('customerEmail').value = customer ? customer.email : '';
        document.getElementById('customerPhone').value = customer ? customer.phone : '';
        document.getElementById('customerAddress').value = customer ? customer.address : '';
        document.getElementById('formTitle').innerText = customer ? 'Edit Customer' : 'Add Customer';
        modal.classList.remove('hidden');
    }

    function closeForm() {
        document.getElementById('customerFormModal').classList.add('hidden');
        document.getElementById('customerForm').reset();
    }

    function editCustomer(customerId) {
        document.getElementById('customerFormModal').classList.remove('hidden');
        const customer = customers.find(c => c.customerId === customerId);
         alert("edit!");
        openForm(customer);
    }

    function deleteCustomer(customerId) {
        if (confirm('Are you sure you want to delete this customer?')) {
            // Xóa khách hàng từ dữ liệu và cập nhật bảng
            customers = customers.filter(c => c.customerId !== customerId);
            renderTable(); // Cập nhật lại bảng
        }
    }

    function submitCustomer(event) {
        event.preventDefault();
        const id = document.getElementById('customerId').value;
        const name = document.getElementById('customerName').value;
        const department = document.getElementById('customerDepartment').value;
        const email = document.getElementById('customerEmail').value;
        const phone = document.getElementById('customerPhone').value;
        const address = document.getElementById('customerAddress').value;

        if (id) {
            // Sửa thông tin khách hàng
            const index = customers.findIndex(c => c.customerId === id);
            customers[index] = { customerId: id, firstName: name, lastName: department, email, phone, address };
        } else {
            // Thêm khách hàng mới
            const newCustomer = {
                customerId: new Date().getTime(), // Tạo ID mới
                firstName: name,
                lastName: department,
                email,
                phone,
                address
            };
            customers.push(newCustomer);
        }

        renderTable(); // Cập nhật lại bảng
        closeForm();
    }

    function renderTable() {
        const tbody = document.querySelector('tbody');
        tbody.innerHTML = ''; // Xóa nội dung hiện tại

        customers.forEach(customer => {
            const row = `<tr class="hover:bg-blue-100 transition duration-200">
                <td class="py-3 px-4 border-b" th:text="${customer.customerId}">${customer.customerId}</td>
                <td class="py-3 px-4 border-b" th:text="${customer.firstName}">${customer.firstName}</td>
                <td class="py-3 px-4 border-b" th:text="${customer.lastName}">${customer.lastName}</td>
                <td class="py-3 px-4 border-b" th:text="${customer.email}">${customer.email}</td>
                <td class="py-3 px-4 border-b" th:text="${customer.phone}">${customer.phone}</td>
                <td class="py-3 px-4 border-b" th:text="${customer.address}">${customer.address}</td>
                <td class="py-3 px-4 border-b">
                    <button onclick="editCustomer(${customer.customerId})" class="border border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white py-1 px-2 rounded transition duration-200">Edit</button>
                    <button onclick="deleteCustomer(${customer.customerId})" class="border border-red-600 text-red-600 hover:bg-red-600 hover:text-white py-1 px-2 rounded transition duration-200 ml-2">Delete</button>
                </td>
            </tr>`;
            tbody.innerHTML += row; // Thêm hàng vào bảng
        });
    }
</script>
</body>
</html>
