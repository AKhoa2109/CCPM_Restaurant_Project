<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: base(~{::body})}">
<body>
<div th:fragment="content" class="flex-1 overflow-auto p-6">
    <div class="max-w-3xl mx-auto">
        <div>
            <h2 class="text-2xl font-semibold mb-4">Current Orders</h2>
            <div class="space-y-4">
                <!-- Lặp qua danh sách orderItems -->
                <div th:each="item : ${orderItems}" class="bg-white rounded-lg shadow-lg p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <img src="https://lavenderstudio.com.vn/wp-content/uploads/2017/03/chup-san-pham.jpg" alt="Order image" class="w-16 h-16 rounded-lg object-cover">
                        <div>
                            <p class="font-semibold">Order # <span th:text="${item.order.id}"></span></p>
                            <p class="text-gray-600 text-sm">Dish ID: <span th:text="${item.dish.dishId}"></span></p>
                            <p class="text-gray-600 text-sm">Price <span th:text="${item.price}"></span></p>
                            <p class="text-gray-400 text-sm">Quantity: <span th:text="${item.quantity}"></span></p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Form để thay đổi trạng thái -->
                        <form th:action="@{/order-item/updateOrderStatus}" method="post">
                            <input type="hidden" name="orderItemId" th:value="${item.id}"/>
                            <select name="orderStatus" class="bg-white border border-gray-300 text-sm rounded-lg px-4 py-2 text-gray-800"
                                    onchange="this.form.submit()">
                                <option value="PENDING" class="bg-yellow-100 text-yellow-700"
                                        th:selected="${item.orderStatus == T(com.restaurant.management.enums.OrderStatus).PENDING}">
                                    PENDING
                                </option>
                                <option value="COMPLETED" class="bg-green-100 text-green-700"
                                        th:selected="${item.orderStatus == T(com.restaurant.management.enums.OrderStatus).COMPLETED}">
                                    COMPLETED
                                </option>
                                <option value="CANCELED" class="bg-red-100 text-red-700"
                                        th:selected="${item.orderStatus == T(com.restaurant.management.enums.OrderStatus).CANCELED}">
                                    CANCELED
                                </option>
                            </select>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
